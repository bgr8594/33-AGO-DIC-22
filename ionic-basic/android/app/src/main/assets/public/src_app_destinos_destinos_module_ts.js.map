{"version":3,"file":"src_app_destinos_destinos_module_ts.js","mappings":"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","sources":["./src/app/destinos/destinos-routing.module.ts","./src/app/destinos/destinos.module.ts","./src/app/destinos/destinos.page.ts","./src/app/googlemaps/googlemaps.component.ts","./src/app/googlemaps/googlemaps.service.ts","./node_modules/@capacitor/geolocation/dist/esm/definitions.js","./node_modules/@capacitor/geolocation/dist/esm/index.js"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DestinosPage } from './destinos.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DestinosPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DestinosPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DestinosPageRoutingModule } from './destinos-routing.module';\n\nimport { DestinosPage } from './destinos.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DestinosPageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [DestinosPage]\n})\nexport class DestinosPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Lugar } from '../models/lugar.model';\nimport { AuthService } from '../service/autservice.service';\nimport { GooglemapsComponent } from '../googlemaps/googlemaps.component';\nimport { ModalController } from '@ionic/angular';\n@Component({\n  selector: 'app-destinos',\n  templateUrl: './destinos.page.html',\n  styleUrls: ['./destinos.page.scss'],\n})\nexport class DestinosPage implements OnInit {\n\n  lugar: Lugar = new Lugar();\n  destinos: any[] = [];\n  ionicForm: FormGroup;\n  estado: string =\"Alta destino\";\n  editando: boolean= false;\n  latitud: number;\n  longitud: number;\n\n  constructor(private authService: AuthService,\n    private formBuilder: FormBuilder,\n    private modalController: ModalController) { }\n\n  ngOnInit() {\n    this.buildForm();\n    this.getPosition();\n    //this.authService.getLugares(this.destinos);\n  }\n\n  // cada que se vuelve a entrar a la pagina ó componente de pagina\n  //https://ionicframework.com/docs/angular/lifecycle\n  ionViewWillEnter(){\n    this.authService.getLugares(this.destinos);\n  }\n\n  altaLugar(){\n    this.authService.altaLugar(this.lugar);\n    this.authService.getLugares(this.destinos);\n    this.ionicForm.reset();\n  }\n\n  submitForm(){\n    if(this.ionicForm.valid){\n      this.lugar.latitud = this.latitud;\n      this.lugar.longitud = this.longitud;\n      if(!this.editando){\n        this.lugar.nombre = this.ionicForm.get('nombre').value;\n        this.authService.altaLugar(this.lugar).then((e:any)=>{\n          this.ionicForm.reset();\n          this.authService.getLugares(this.destinos);\n        }).catch(e=>{\n          console.error(e);\n        });        \n      } else{\n        this.lugar.nombre = this.ionicForm.get('nombre').value;\n        this.authService.updateLugares(this.lugar.id, this.lugar).then(e=>{\n          this.editando= false;\n          this.estado = \"Alta destino\";\n          this.lugar = new Lugar();\n          this.ionicForm.reset();\n          this.authService.getLugares(this.destinos);\n        }).catch(e=>{\n          console.error(e);\n        });\n      }\n    }\n  }\n  buildForm(){\n    this.ionicForm = this.formBuilder.group({\n      nombre: new FormControl('',{validators: [Validators.required]})\n    });\n  }  \n\n  hasError: any = (controlName: string, errorName: string) => {\n    return !this.ionicForm.controls[controlName].valid &&\n      this.ionicForm.controls[controlName].hasError(errorName) &&\n      this.ionicForm.controls[controlName].touched;\n  }  \n\n  editarLugar(id: any, lugar: any) {\n    this.editando = true;\n    this.lugar = lugar;\n    this.estado = \"Editar el lugar\";\n    this.ionicForm.get('nombre').setValue(lugar.nombre);\n  }\n\n  eliminarLugar(id: any) {\n    this.estado = \"Alta destino\";\n    this.editando = false;\n    this.ionicForm.reset();\n    this.authService.deleteLugar(id).then(response=>{\n      this.authService.getLugares(this.destinos);     \n    }).catch(error=>{});\n\n  }\n\n  cancelarEdicion(){\n    this.estado = \"Alta destino\";\n    this.editando = false;\n    this.ionicForm.reset();\n    this.lugar = new Lugar();\n  }\n\n  getPosition(): Promise<any> {\n\t\treturn new Promise((resolve: any, reject: any): any => {\n\t\t\tnavigator.geolocation.getCurrentPosition((resp: any) => {\n\t\t\t\tthis.latitud = resp.coords.latitude;\n\t\t\t\tthis.longitud = resp.coords.longitude;\n\t\t\t},\n\t\t\t(err: any) => {\n\t\t\t\tif ( err.code === 1 ) {\n\t\t\t\t\talert('Favor de activar la geolocalización en tu navegador y recargar la pantalla.');\n\t\t\t\t}\n\t\t\t\tthis.latitud = null;\n\t\t\t\tthis.longitud = null;\n\t\t\t}, {timeout: 5000, enableHighAccuracy: true });\n\t\t});\n\t}\n\n  async addDirection(){\n    let positionInput: any = {\n      lat: -2.898116,\n      lng: -78.99958149999999\n    };\n    if(this.latitud !== null){\n      positionInput.lat = this.latitud;\n      positionInput.lng = this.longitud;\n    }\n\n\n    const modalAdd = await this.modalController.create({\n      component: GooglemapsComponent,\n      mode: 'ios',\n      swipeToClose: true,\n      componentProps: {position: positionInput} \n    });\n\n    await modalAdd.present();\n\n    const {data} = await modalAdd.onWillDismiss();\n\n    if(data){\n      console.log('data->', data);\n      //this.cli\n      this.longitud = data.pos.lng;\n      this.latitud = data.pos.lat;\n      console.log('datos de ubiciacion actualizados, latitud: '+this.latitud+' \\nlongitud:'+this.longitud);\n    }\n  }  \n}\n","import { Component, OnInit, Renderer2, Input, ElementRef, Inject, ViewChild } from '@angular/core';\nimport { modalController } from '@ionic/core';\nimport { Geolocation } from '@capacitor/geolocation';\nimport { GooglemapsService } from './googlemaps.service';\nimport { DOCUMENT } from '@angular/common';\nimport { ModalController } from '@ionic/angular';\n\ndeclare var google: any;\n\n@Component({\n  selector: 'app-googlemaps',\n  templateUrl: './googlemaps.component.html',\n  styleUrls: ['./googlemaps.component.scss'],\n})\nexport class GooglemapsComponent implements OnInit {\n // posicion inicial del mapa, en caso de que no se le de una por default\n @Input() position : any = {\n  lat:  -2.889,\n  lng:  -78.899\n}\n\nlabel: any = {\n  titulo: 'Ubicación',\n  subtitulo: 'Mi ubicación de envio'\n};\n\nmap: any;\nmarker: any;\ninfowindow: any;\npositionSet: any;\n\n@ViewChild('map') divMap: ElementRef;\n\n  constructor(\n    private renderer: Renderer2,\n    @Inject(DOCUMENT) private document,\n    private googleMapsService: GooglemapsService,\n    public modalController: ModalController\n  ) { }\n\n  ngOnInit() {\n    this.init();\n  }\n\n  \n  async init(){\n    this.googleMapsService.init(this.renderer, this.document).\n    then(()=>{\n      this.initMap()\n    })\n    .catch((error: any)=>{\n      console.error(error);\n    });\n  }\n\n  initMap(){\n    const position = this.position;\n\n    let latLng = new google.maps.LatLng(position.lat, position.lng);\n\n    let mapOptions = {\n      center: latLng,\n      zoom: 15,\n      disableDefaultUI: true,\n      clickableIcons: false\n    };\n\n    this.map = new google.maps.Map(this.divMap.nativeElement, mapOptions);\n\n    this.marker = new google.maps.Marker({\n      map: this.map,\n      animation: google.maps.Animation.DROP,\n      draggable: true\n    });\n\n    this.clickHandEvent();\n    this.infowindow = new google.maps.InfoWindow();\n    this.addMarker(position);\n    this.setInfoWindow(this.marker, this.label.titulo, this.label.subtitulo);\n  }\n  clickHandEvent(){\n    this.map.addListener('click', (event: any)=>{\n      const position = {\n        lat: event.latLng.lat(),\n        lng: event.latLng.lng(),\n      };\n      this.addMarker(position);\n    });\n  }\n\n  addMarker(position: any): void{\n    let latLng = new google.maps.LatLng(position.lat, position.lng);\n    this.marker.setPosition(latLng);\n    this.map.panTo(position);\n    this.positionSet = position;\n  }\n\n  setInfoWindow(marker: any, titulo: string, subtitulo: string){\n    const contentString = '<div id=\"contentInsideMap\">' +\n                          '<div>'+\n                          '</div>'+\n                          '<p style=\"font-weight: bold; margin-bottom:5px;\">'+\n                          '<div id=\"bodyContent\">'+\n                          '<p class=\"normal m-0\">'+\n                          subtitulo+'</p>'+\n                          '</div>'+\n                          '</div>';\n    this.infowindow.setContent(contentString);\n    this.infowindow.open(this.map, marker);\n  }\n\n  async mylocation(){\n    Geolocation.getCurrentPosition().then((res)=>{\n      console.log('mulocation() -> get', res);\n\n      const position = {\n        lat: res.coords.latitude,\n        lng: res.coords.longitude\n      };\n\n      this.addMarker(position);\n    });\n  }\n\n  aceptar(){\n    console.log('click aceptar ->', this.positionSet);\n    this.modalController.dismiss({pos: this.positionSet});\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { environment } from 'src/environments/environment';\n\ndeclare var google: any;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GooglemapsService {\n\n  apikey: string = environment.apiKeyMaps;\n  mapsloaded: boolean = false;\n\n  constructor() { }\n\n  init(renderer: any, document: any){\n    \n    return new Promise((resolve, reject) => {\n      if(this.mapsloaded){\n        console.log('google is preview loaded');\n        resolve(true);\n        return;\n      }\n\n      const script =renderer.createElement('script');\n      script.id =\"googleMaps\";\n      window['mapInit'] = () =>{\n        this.mapsloaded = true;\n        if(google){\n          console.log('google is loaded');\n        } else{\n          console.log('google is not defined');\n        }\n\n        resolve(true);\n        return;\n      };\n\n\n      if(this.apikey){\n        script.src = 'https://maps.googleapis.com/maps/api/js?key='+this.apikey+'&callback=mapInit';\n      } else{\n        script.src = 'https://maps.googleapis.com/maps/api/js?callback=mapInit';\n      }\n      renderer.appendChild(document.body, script);\n    });\n  }\n}\n","export {};\n","import { registerPlugin } from '@capacitor/core';\nconst Geolocation = registerPlugin('Geolocation', {\n    web: () => import('./web').then(m => new m.GeolocationWeb()),\n});\nexport * from './definitions';\nexport { Geolocation };\n"],"names":["Component","FormBuilder","FormControl","Validators","Lugar","AuthService","GooglemapsComponent","ModalController","DestinosPage","constructor","authService","formBuilder","modalController","controlName","errorName","ionicForm","controls","valid","hasError","touched","ngOnInit","buildForm","getPosition","ionViewWillEnter","getLugares","destinos","altaLugar","lugar","reset","submitForm","latitud","longitud","editando","nombre","get","value","then","e","catch","console","error","updateLugares","id","estado","group","validators","required","editarLugar","setValue","eliminarLugar","deleteLugar","response","cancelarEdicion","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","resp","coords","latitude","longitude","err","code","alert","timeout","enableHighAccuracy","addDirection","positionInput","lat","lng","modalAdd","create","component","mode","swipeToClose","componentProps","position","present","data","onWillDismiss","log","pos","selector","template","Renderer2","Input","Inject","ViewChild","Geolocation","GooglemapsService","DOCUMENT","renderer","document","googleMapsService","titulo","subtitulo","init","initMap","latLng","google","maps","LatLng","mapOptions","center","zoom","disableDefaultUI","clickableIcons","map","Map","divMap","nativeElement","marker","Marker","animation","Animation","DROP","draggable","clickHandEvent","infowindow","InfoWindow","addMarker","setInfoWindow","label","addListener","event","setPosition","panTo","positionSet","contentString","setContent","open","mylocation","res","aceptar","dismiss","args","registerPlugin","web","m","GeolocationWeb"],"sourceRoot":"webpack:///","x_google_ignoreList":[5,6]}
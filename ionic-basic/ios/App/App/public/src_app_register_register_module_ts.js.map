{"version":3,"file":"src_app_register_register_module_ts.js","mappings":"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","sources":["./src/app/register/register-routing.module.ts","./src/app/register/register.module.ts","./src/app/register/register.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RegisterPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPageRoutingModule } from './register-routing.module';\n\nimport { RegisterPage } from './register.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RegisterPageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [RegisterPage]\n})\nexport class RegisterPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from '../service/autservice.service';\nimport { Router } from '@angular/router';\nimport { User } from '../models/user.model';\nimport { FormBuilder, FormGroup, Validators, FormControl, AbstractControl } from '@angular/forms';\nimport { ModalController, LoadingController } from '@ionic/angular';\nimport { ModalErrorComponent } from '../componentes/modal-error/modal-error.component';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.page.html',\n  styleUrls: ['./register.page.scss'],\n})\nexport class RegisterPage implements OnInit {\n\n  user: User = new User();\n  formRegister : FormGroup;\n  constructor(\n    private autSvc: AuthService,\n    private router: Router,\n    private formBuilder: FormBuilder,\n    private modalCtrl: ModalController,\n    private loadingController: LoadingController\n    ) {\n      this.buildForm();\n      this.formRegister.reset()\n     }\n\n  ngOnInit() {\n    this.formRegister.reset();\n  }\n\n\n  submitForm(){\n    if(this.formRegister.valid){\n      this.user.email = this.formRegister.get('email').value;\n      this.user.password = this.formRegister.get('password').value;\n      this.presentLoadingWithOptions();\n      this.onRegister();\n    }\n  }\n\n  ionViewWillEnter(){\n    this.formRegister.reset();\n  }\n\n  async onRegister(){\n    this.autSvc.onRegister(this.user).then(user=>{\n      if(user){\n        this.loadingController.dismiss();\n        console.log('Successfully created user!');\n        this.router.navigate(['/login']);\n      }\n    }).catch(error=>{\n      this.loadingController.dismiss();\n      if(error.code =='auth/email-already-in-use'){\n        this.openModal(error);\n      }\n      console.log(error.code);\n    })\n\n  } \n\n  hasError: any = (controlName: string, errorName: string) => {\n\t\treturn !this.formRegister.controls[controlName].valid &&\n\t\t\tthis.formRegister.controls[controlName].hasError(errorName) &&\n\t\t\tthis.formRegister.controls[controlName].touched;\n\t}\n\n  buildForm(){\n    this.formRegister = this.formBuilder.group({\n      email: new FormControl('',{validators: [Validators.email,Validators.required]}),\n      password: new FormControl('', {validators: [Validators.required, Validators.minLength(6), Validators.maxLength(6)]})\n    });\n  }\n\n  \n  async openModal(user: any){\n    const modal = await this.modalCtrl.create({\n      component: ModalErrorComponent,\n      componentProps:{\n        error: 'Error al crear el usuario'\n      }\n    });\n    return await modal.present();\n  }\n\n  async presentLoadingWithOptions() {\n    const loading = await this.loadingController.create({\n      //spinner: null,\n      //duration: 5000,\n      message: 'Iniciando sesi√≥n...',\n      translucent: true,\n      //cssClass: 'custom-class custom-loading',\n      backdropDismiss: true\n    });\n    await loading.present();\n\n    const { role, data } = await loading.onDidDismiss();\n    console.log('Loading dismissed with role:', role);\n  }\n\n}\n"],"names":["Component","AuthService","Router","User","FormBuilder","Validators","FormControl","ModalController","LoadingController","ModalErrorComponent","RegisterPage","constructor","autSvc","router","formBuilder","modalCtrl","loadingController","controlName","errorName","formRegister","controls","valid","hasError","touched","buildForm","reset","ngOnInit","submitForm","user","email","get","value","password","presentLoadingWithOptions","onRegister","ionViewWillEnter","then","dismiss","console","log","navigate","catch","error","code","openModal","group","validators","required","minLength","maxLength","modal","create","component","componentProps","present","loading","message","translucent","backdropDismiss","role","data","onDidDismiss","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
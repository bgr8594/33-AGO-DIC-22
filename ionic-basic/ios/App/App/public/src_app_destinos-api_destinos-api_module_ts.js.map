{"version":3,"file":"src_app_destinos-api_destinos-api_module_ts.js","mappings":"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","sources":["./src/app/destinos-api/destinos-api-routing.module.ts","./src/app/destinos-api/destinos-api.module.ts","./src/app/destinos-api/destinos-api.page.ts","./src/app/service/api.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DestinosFirestorePage } from './destinos-api.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DestinosFirestorePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DestinosFirestorePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DestinosFirestorePageRoutingModule } from './destinos-api-routing.module';\n\nimport { DestinosFirestorePage } from './destinos-api.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DestinosFirestorePageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [DestinosFirestorePage]\n})\nexport class DestinosFirestorePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Lugar } from '../models/lugar.model';\nimport { ApiService } from '../service/api.service';\n\n@Component({\n  selector: 'app-destinos-api',\n  templateUrl: './destinos-api.page.html',\n  styleUrls: ['./destinos-api.page.scss'],\n})\nexport class DestinosFirestorePage implements OnInit {\n  lugar: Lugar = new Lugar();\n  destinos: any[] = [];\n  ionicForm: FormGroup;\n  estado: string =\"Alta destino\";\n  editando: boolean= false;\n  latitud: number;\n  longitud: number;\n  \n  constructor(\n    private lugarService: ApiService,\n    private formBuilder: FormBuilder\n    ) { }\n\n  ngOnInit() {\n    this.buildForm();\n    this.getPosition();\n    //this.getLugares();\n  }\n\n  getLugares(){\n    this.lugarService.getLugaresApi().subscribe((response: Lugar[])=>{\n      this.destinos = response;\n    }, error=>{\n      console.error(error);\n    });\n  }\n\n  submitForm(){\n    if(this.ionicForm.valid){\n      this.lugar.nombre = this.ionicForm.get('nombre').value;\n      this.lugar.latitud = this.latitud;\n      this.lugar.longitud = this.longitud;\n      if(!this.editando){\n        this.lugarService.altaLugarApi(this.lugar).subscribe((response: any)=>{\n          if(response){\n            this.ionicForm.reset();\n            this.getLugares();\n          } else{\n            this.errorProceso();\n          }\n        }, error=>{\n          console.error(error);\n        })      \n      } else{\n        this.lugarService.editarLugarApi(this.lugar.id, this.lugar).subscribe((resposne: any)=>{\n          if(resposne){\n            this.editando= false;\n            this.estado = \"Alta destino\";\n            this.lugar = new Lugar();\n            this.ionicForm.reset();\n            this.getLugares();\n          } else{\n            this.errorProceso();\n          }\n        }, error=>{\n          console.error(error);\n        });\n      }\n    }\n  }\n\n  buildForm(){\n    this.ionicForm = this.formBuilder.group({\n      nombre: new FormControl('',{validators: [Validators.required]})\n    });\n  }\n\n  hasError: any = (controlName: string, errorName: string) => {\n\t\treturn !this.ionicForm.controls[controlName].valid &&\n\t\t\tthis.ionicForm.controls[controlName].hasError(errorName) &&\n\t\t\tthis.ionicForm.controls[controlName].touched;\n\t}\n\n  \n  editarLugar(id: any, lugar: any) {\n    this.editando = true;\n    this.lugar = lugar;\n    this.estado = \"Editar el lugar\";\n    this.ionicForm.get('nombre').setValue(lugar.nombre);\n  }\n\n  eliminarLugar(id: any) {\n    this.lugarService.borrarLugarApi(id).subscribe((response:any)=>{\n      if(response){\n        this.getLugares();\n        this.estado = \"Alta destino\";\n        this.editando = false;\n        this.ionicForm.reset();\n      } else{\n        this.errorProceso();\n      }\n    }, error=>{\n      console.error(error);\n    })\n  }\n\n // cada que se vuelve a entrar a la pagina ó componente de pagina\n  //https://ionicframework.com/docs/angular/lifecycle\n  ionViewWillEnter(){\n    this.getLugares();\n  }\n\n  cancelarEdicion(){\n    this.estado = \"Alta destino\";\n    this.editando = false;\n    this.ionicForm.reset();\n    this.lugar = new Lugar();\n  }\n\n  getPosition(): Promise<any> {\n\t\treturn new Promise((resolve: any, reject: any): any => {\n\t\t\tnavigator.geolocation.getCurrentPosition((resp: any) => {\n\t\t\t\tthis.latitud = resp.coords.latitude;\n\t\t\t\tthis.longitud = resp.coords.longitude;\n\t\t\t},\n\t\t\t(err: any) => {\n\t\t\t\tif ( err.code === 1 ) {\n\t\t\t\t\talert('Favor de activar la geolocalización en tu navegador y recargar la pantalla.');\n\t\t\t\t}\n\t\t\t\tthis.latitud = null;\n\t\t\t\tthis.longitud = null;\n\t\t\t}, {timeout: 5000, enableHighAccuracy: true });\n\t\t});\n\t}  \n\n  errorProceso(){\n    alert(\"Ocurrio un error en el proceso\");\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { Lugar } from '../models/lugar.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n\n  private basePath = 'http://localhost:8080/post';\n  constructor(private http: HttpClient) { }\n\n\n  // metodos de crud api\n  getLugaresApi() :Observable<Lugar[]>{\n    return this.http.get<any>(`${this.basePath}/list`,{});\n  }\n\n  altaLugarApi(lugar: Lugar): Observable<any>{\n    return this.http.post(`${this.basePath}/add`, lugar);\n  }\n\n  borrarLugarApi(id: string): Observable<any>{\n    return this.http.delete(`${this.basePath}/${id}/delete`, {});\n  }\n\n  editarLugarApi(id: string, lugar: Lugar): Observable<any>{\n    return this.http.put(`${this.basePath}/${id}/update`,lugar,{});\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
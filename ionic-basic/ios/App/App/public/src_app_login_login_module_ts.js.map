{"version":3,"file":"src_app_login_login_module_ts.js","mappings":"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","sources":["./src/app/login/login-routing.module.ts","./src/app/login/login.module.ts","./src/app/login/login.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule, ReactiveFormsModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { User } from '../models/user.model';\nimport { ModalErrorComponent } from '../componentes/modal-error/modal-error.component';\nimport { ModalController, LoadingController } from '@ionic/angular';\nimport { AuthService } from '../service/autservice.service';\nimport { Router } from '@angular/router';\nimport {FormGroup, FormBuilder, Validators, FormControl, AbstractControl} from '@angular/forms';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n\n  user: User = new User();\n\n  ionicForm: FormGroup;\n  constructor(\n    private router: Router,\n    private modalCtrl: ModalController,\n    private autSvc: AuthService,\n    private formBuilder: FormBuilder,\n    private loadingController: LoadingController\n    ) { }\n\n  ngOnInit() {\n    this.buildForm();\n  }\n\n  hasError: any = (controlName: string, errorName: string) => {\n\t\treturn !this.ionicForm.controls[controlName].valid &&\n\t\t\tthis.ionicForm.controls[controlName].hasError(errorName) &&\n\t\t\tthis.ionicForm.controls[controlName].touched;\n\t}\n\n\n\tnotZero(control: AbstractControl) {\n\t\tif (control.value && control.value.monto <= 0) {\n\t\t\treturn { 'notZero': true };\n\t\t}\n\t\treturn null;\n\t} \n\n  async onLogin(){\n    this.autSvc.onLogin(this.user).then((user:any)=>{\n      if(user!=null && user.code ==undefined){\n        \n        console.log('Successfully logged in!');\n        this.loadingController.dismiss();\n        this.router.navigate(['main/presupuesto']);\n      }\n      else{\n        this.loadingController.dismiss();\n        if(user.code){\n          if(user.code=='auth/wrong-password' || user.code =='auth/invalid-email' || user.code=='auth/argument-error'){\n            this.openModal(user);\n          }\n        }\n      }\n    }).catch((error: any)=>{\n      this.loadingController.dismiss();\n      this.openModal(error);\n    })\n\n  }\n\n  submitForm(){\n    if(this.ionicForm.valid){\n      this.user.email = this.ionicForm.get('email').value;\n      this.user.password = this.ionicForm.get('password').value;\n      this.presentLoadingWithOptions();\n      this.onLogin();\n    }\n  }\n  \n  ionViewWillEnter(){\n    this.ionicForm.reset();\n  }\n\n  async openModal(user: any){\n    const modal = await this.modalCtrl.create({\n      component: ModalErrorComponent,\n      componentProps:{\n        error: 'Ingres password y/o contraseña'\n      }\n    });\n    return await modal.present();\n  }\n\n  buildForm(){\n    this.ionicForm = this.formBuilder.group({\n      email: new FormControl('',{validators: [Validators.email,Validators.required]}),\n      password: new FormControl('', {validators: [Validators.required, Validators.minLength(6), Validators.maxLength(6)]})\n    });\n  }\n\n  async presentLoadingWithOptions() {\n    const loading = await this.loadingController.create({\n      //spinner: null,\n      //duration: 5000,\n      message: 'Iniciando sesión...',\n      translucent: true,\n      //cssClass: 'custom-class custom-loading',\n      backdropDismiss: true\n    });\n    await loading.present();\n\n    const { role, data } = await loading.onDidDismiss();\n    console.log('Loading dismissed with role:', role);\n  }\n\n}\n"],"names":["Component","User","ModalErrorComponent","ModalController","LoadingController","AuthService","Router","FormBuilder","Validators","FormControl","LoginPage","constructor","router","modalCtrl","autSvc","formBuilder","loadingController","controlName","errorName","ionicForm","controls","valid","hasError","touched","ngOnInit","buildForm","notZero","control","value","monto","onLogin","user","then","code","undefined","console","log","dismiss","navigate","openModal","catch","error","submitForm","email","get","password","presentLoadingWithOptions","ionViewWillEnter","reset","modal","create","component","componentProps","present","group","validators","required","minLength","maxLength","loading","message","translucent","backdropDismiss","role","data","onDidDismiss","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}